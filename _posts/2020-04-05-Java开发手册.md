---
layout:     post
title:      Java基础知识 
subtitle:   知识积累
date:       2020-04-05
author:     guchaolong
header-img: img/post-bg-re-vs-ng2.jpg
catalog: true
category: Java
tags:
       - Java
---

[TOC]

# Java开发手册

***



## 一、编程规约

### 命名

1. 不以_或**$**开头或结尾

2. 禁止英文+**拼音**混合，alibaba、taobao、youku、hangzhou等**国际通用**的可视为英文

3. **包名小写**，点**分隔符键有且仅有一个自然语义**的英文单词，包名都是**单数**形式，类名如果有复数含义，类名可以使用如数形式，如**MessageUtils**

4. **接口**中public也不要加，加上javadoc注释，尽量不要在接口中定义变量，如果一定要定义变量，肯定是与接口方法相关，并且是整个应用的基础常量

   ~~~
   String COMPANY = "alibaba";
   void f();
   ~~~

5. 枚举，带上**Enum后缀**，枚举成员名称**全大写**，单词间用**下划线**隔开，枚举其实就是特殊的常量类，且构造方法默认强制是私有,如DealStatusEnum

6. **抽象类**，**Abstract**或**Base**开头、异常类名以**Exception**结尾、测试类以原类名+**Test**结尾

7. **类名**，驼峰风格，除领域模型相关的如 **DO、BO、DTO、VO**等，另外**XML、TCP、UDP**等也是遵循驼峰

   ~~~
   UserDO、XmlService、TcpUdpDeal
   ~~~

8. **类名中体现设计模式**，如OrderFactory; LoginProxy; ResourceObserver;

9. 接口和实现类

   1. 对于Service和DAO类，基于SOA的理念，暴露出来的服务一定是接口，内部实现类用**Impl的后缀**与接口区别，如CacheServiceImpl implements CacheService
   2. 如果是**形容能力**的接口名称，去对应的形容词做接口名（通常是**-able**的形式），如AbstractIranslator implements Translatable

10. **常量**，全部**大写**，单词间用**下划线**隔开，力求表达完整清楚，不嫌长

11. **数组**定义：String [] args;

12. POJO类中**布尔类型变量**，不加**is**,因为部分框架解析会引起序列号错误

13. **缩写**要规范

14. 各层命名规约

    1. Service/DAO层方法前缀
       1. 获取单个对象 **get**
       2. 获取多个对象 **list**
       3. 获取统计值**count**
       4. 插入 **save**(推荐)或**insert**
       5. 删除 **remove**(推荐)或**delete**
       6. 修改 **updaet**
    2. 领域模型
       1. 数据对象：xxxDO,xxx即为数据表名
       2. 数据传输对象：xxxDTO,xxx为业务领域相关的名称
       3. 展示对象：xxxVO,xxx一般为网页名称
       4. POJO是DO/DTO/BO/VO的统称，禁止命名成xxxPOJO



### 常量定义

1. 不允许出现任何魔法值（即未经定义的常量）

   ~~~
   反例
   String key = "Id
   ~~~

2. long或Long赋值，用大写的L

3. 不要使用一个常量类维护所有常量，应该按功能进行归类，分开维护，如 缓存相关的CacheConsts、系统配置相关的ConfigConsts

### 格式规约

1. 左括号和后一个字符间不加空格，通用，右括号和前一个字符间也不加空格

2. if/else/for/while/switch/do等保留字与左右括号之间都必须加空格

3. 运算符前后必须加一个空格 （赋值=、逻辑&&、+ - * /、三目等）

4. 单行字符数限制不超过120个（包括空格），IDEA中的竖线，如需要换行

   * 运算符与下文一起换行
   * 方法调用的点符号与下文一起换行
   * 多个参数超长，逗号后换行
   * 不在括号前换行

   ~~~
   String sb = new StringBuffer();
   sb.append("zi").append("xin")...
   	.append("huang")...
   	.append("huang")...
   	
   反例
   //括号前换行
   sb.append("zi").append("xin")...append
   	("huang")
   //逗号前换行
   method(args1, args2, ...
   	, argsx)
   ~~~

5. 方法体内的执行语句组、变量定义语句组、不同的业务逻辑之间或不同的语义之间插入一个空行，相同业务逻辑和语义之间不需要插入空行



### OOP规约

1. 静态变量或静态方法，用类名访问，用对象访问只是无谓增加编译器解析成本

2. 对外暴露的接口签名，原则上不允许修改，避免接口的调用方产生影响，接口过时必须加@Deprecated注解

3. 使用常量或确定有值的对象来调用equals,推荐使用java.util.Objects#equals

4. 所有包装类型对象比较使用equals方法（Integer在-128至127之间，赋值时使用缓存中的同一份，这个区间才可以用==）

5. 基本数据类型和包装数据类型

   1. 类属性使用包装类型，数据库的查询结果可能为null,如果用基本数据类型接收，需要自动拆箱，有NPE风险
   2. pgc方法的返回值和参数必须使用包装数据类型
   3. 局部变量推荐基本数据类型

6. 不要修改serialVersionUID字段，不一致会抛出序列化运行时异常

7. 构造方法中禁止加入任务业务逻辑，如果有初始化逻辑，放init方法中

8. 类内方法定义顺序：public方法或pretected方法  >  私有方法  >  getter/setter方法

   ~~~
   公有方法是类的调用者和维护者最关心的方法，首屏展示最好；保护方法虽然只是子类关系，也可能是“模板设计模式”下的核心方法；私有方法外部一般不需要特别关心，是一个黑盒实现；因为方法信息价值低，所有Service和DAO的getter/setter方法在最后
   ~~~

9. 循环体内，字符串的连接方式，使用StringBuilder的append()方法进行扩展

   ~~~
   
   ~~~

10. final可提高程序的相应效率

### 集合处理



